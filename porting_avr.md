# arduino-cliによるビルド

## install

## build



# AVR向け移植

豊島さんオリジナルには ATmega88/ATmega32u4向けがある。ここではATmega328Pをはじめとする5V系AVR移植を扱う。

SRAM+バッファ2本が標準の形態だが、DRAMを使うことでGPIOピン数を減らすことができる。それで28pinで動作できるようにすることを試みる。

対象とするDRAMは4256系(64k x 4bit)、秋月で入手可能なM11B416256A(256k x 16bit)とする。

## DRAMの使用

64k x 8 以上の構成のDRAMを使うことを想定する。通常は`A0-A7`, `D0-D7`, `/RAS`, `/CAS`, `/WE`, オプションとして `/OE`を使うものがある。

ここで、`A8`以上のアドレスピンは固定、`/CE`端子はL固定にして、CPUと直結しないことを前提にしている。

28pin AVRでCPU のピン数を節約するために、`A0-A7`と`D0-D7`をまとめることを考える。通常のDRAMでは`/CAS`がLの間は出力状態になるので、アドレスバスとデータバスを連結すると、外部から供給するアドレスデータとDRAM出力がバッティングする。よって、`/OE`をもつDRAMに限られる。幸いなことに、M11B416256Aは`/OE`をもつ。`AD0-7`, `/RAS`, `/CAS`, `/WE`, `/OE`の12本で構成する。

### アドレスバスとデータバスの統合

アドレスは`/RAS`の下りエッジ、`/CAS`の下りエッジで取り込めばあとは3stateになる

